<!DOCTYPE html>
 <html><head><meta charset="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><link rel="preload" href="/learning-react-and-redux-documentation/component---src-layouts-index-js-b2febb3ba4901ceefd5f.js" as="script"/><link rel="preload" href="/learning-react-and-redux-documentation/component---src-templates-post-js-f6e3269c26d2ee27eb78.js" as="script"/><link rel="preload" href="/learning-react-and-redux-documentation/path---tutorial-steps-22-testing-connected-components-8798581c280a41fc4c57.js" as="script"/><link rel="preload" href="/learning-react-and-redux-documentation/app-e9ce819f8a61321e8117.js" as="script"/><link rel="preload" href="/learning-react-and-redux-documentation/commons-8d5048b07969403445b0.js" as="script"/><script id="webpack-manifest">
            //<![CDATA[
            window.webpackManifest = {"231608221292675":"app-e9ce819f8a61321e8117.js","195351340454287":"component---src-templates-post-js-f6e3269c26d2ee27eb78.js","162898551421021":"component---src-pages-404-js-4503918ea3a16cfcdb75.js","35783957827783":"component---src-pages-index-js-ff64f775001c0bf6a0a8.js","60335399758886":"path----d56a5c009c65cb248351.js","118799121156847":"path---tutorial-getting-started-ae43432ee82748e491d4.js","214057910109245":"path---tutorial-steps-1-setup-package-929f47777867942a4d51.js","206805960689390":"path---tutorial-steps-10-pointer-details-14494b85b80cb7a53e9a.js","135563891114638":"path---tutorial-links-7cf8627127236d4f55cb.js","132978315027406":"path---tutorial-steps-11-favourite-places-136974a04bf196c3227d.js","237949882381156":"path---tutorial-steps-13-adding-redux-284b5d7b8b98a3a3e1a0.js","17971265750924":"path---tutorial-steps-12-favourites-list-9d86d294d664281b5e9a.js","1033659491245":"path---tutorial-steps-14-managing-favourites-with-redux-175739e64997d3ac1f00.js","181225226889932":"path---tutorial-steps-15-removing-favourites-from-the-list-3a70425c022975c68aad.js","118277567452233":"path---tutorial-steps-16-ids-for-points-5a64510806675155521b.js","119454655196054":"path---tutorial-steps-17-testing-with-jest-49579ac9166580fec814.js","182874657879501":"path---tutorial-steps-18-testing-redux-actions-b3c3e43591a61499499e.js","164006660818621":"path---tutorial-steps-19-testing-redux-reducers-3ef7e7a67b0ed647369f.js","86486738803091":"path---tutorial-steps-2-webpack-403f0f6ec713345e5832.js","191994760325403":"path---tutorial-steps-20-jest-component-configuration-0a1a0cfc1244545078fa.js","179161860437318":"path---tutorial-steps-21-testing-the-map-899546adc40e2064af01.js","164153876557642":"path---tutorial-steps-22-testing-connected-components-8798581c280a41fc4c57.js","227242793964653":"path---tutorial-steps-23-test-the-app-component-4a70da9742fbe049c4d8.js","169013477403742":"path---tutorial-steps-24-test-favourites-list-fccea5e0ff8dc3f0d2d2.js","198134931227272":"path---tutorial-steps-25-test-the-pointer-7149403793643650be42.js","46414529011902":"path---tutorial-steps-4-eslint-and-prettier-b4950d23812a42614773.js","280001054470434":"path---tutorial-steps-3-babel-5dc95c3a0211bab0fdff.js","235804080668192":"path---tutorial-steps-6-adding-the-map-d69952a46c266f25295b.js","97838741517688":"path---tutorial-steps-5-starting-react-09463efa3ebd994eedda.js","172606999645938":"path---tutorial-steps-7-styling-with-postcss-bcb6b080ea01e8fafabc.js","46098157417510":"path---tutorial-steps-8-webpack-dev-server-77e46cf12be283809c17.js","165467095976884":"path---tutorial-steps-9-adding-points-to-the-map-b725b5643693c8bd7aa2.js","254022195166212":"path---404-a0e39f21c11f6a62c5ab.js","142629428675168":"path---index-0e6d1e68e011d4c11eb9.js","178698757827068":"path---404-html-a0e39f21c11f6a62c5ab.js","114276838955818":"component---src-layouts-index-js-b2febb3ba4901ceefd5f.js"}
            //]]>
            </script><title data-react-helmet="true">Learning React and Redux</title><meta data-react-helmet="true" name="description" content="A tutorial for learning React and Redux"/><meta data-react-helmet="true" name="keywords" content="react, redux, tutorial"/><script>
  !function(e,t,r){function n(){for(;d[0]&&"loaded"==d[0][f];)c=d.shift(),c[o]=!i.parentNode.insertBefore(c,i)}for(var s,a,c,d=[],i=e.scripts[0],o="onreadystatechange",f="readyState";s=r.shift();)a=e.createElement(t),"async"in i?(a.async=!1,e.head.appendChild(a)):i[f]?(d.push(a),a[o]=n):e.write("<"+t+' src="'+s+'" defer></'+t+">"),a.src=s}(document,"script",[
  "/learning-react-and-redux-documentation/commons-8d5048b07969403445b0.js","/learning-react-and-redux-documentation/app-e9ce819f8a61321e8117.js","/learning-react-and-redux-documentation/path---tutorial-steps-22-testing-connected-components-8798581c280a41fc4c57.js","/learning-react-and-redux-documentation/component---src-templates-post-js-f6e3269c26d2ee27eb78.js","/learning-react-and-redux-documentation/component---src-layouts-index-js-b2febb3ba4901ceefd5f.js"
])
  </script><style id="gatsby-inlined-css">html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}body{margin:0}article,aside,details,figcaption,figure,footer,header,main,menu,nav,section,summary{display:block}audio,canvas,progress,video{display:inline-block}audio:not([controls]){display:none;height:0}progress{vertical-align:baseline}[hidden],template{display:none}a{background-color:transparent;-webkit-text-decoration-skip:objects}a:active,a:hover{outline-width:0}abbr[title]{border-bottom:none;text-decoration:underline;text-decoration:underline dotted}b,strong{font-weight:inherit;font-weight:bolder}dfn{font-style:italic}h1{font-size:2em;margin:.67em 0}mark{background-color:#ff0;color:#000}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}img{border-style:none}svg:not(:root){overflow:hidden}code,kbd,pre,samp{font-family:monospace,monospace;font-size:1em}figure{margin:1em 40px}hr{box-sizing:content-box;height:0;overflow:visible}button,input,optgroup,select,textarea{font:inherit;margin:0}optgroup{font-weight:700}button,input{overflow:visible}button,select{text-transform:none}[type=reset],[type=submit],button,html [type=button]{-webkit-appearance:button}[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner,button::-moz-focus-inner{border-style:none;padding:0}[type=button]:-moz-focusring,[type=reset]:-moz-focusring,[type=submit]:-moz-focusring,button:-moz-focusring{outline:1px dotted ButtonText}fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}legend{box-sizing:border-box;color:inherit;display:table;max-width:100%;padding:0;white-space:normal}textarea{overflow:auto}[type=checkbox],[type=radio]{box-sizing:border-box;padding:0}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}[type=search]::-webkit-search-cancel-button,[type=search]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-input-placeholder{color:inherit;opacity:.54}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}html{font:112.5%/1.45em georgia,serif;box-sizing:border-box;overflow-y:scroll}*,:after,:before{box-sizing:inherit}body{color:rgba(0,0,0,.8);font-family:georgia,serif;font-weight:400;word-wrap:break-word;-webkit-font-kerning:normal;font-kerning:normal;-ms-font-feature-settings:"kern","liga","clig","calt";-webkit-font-feature-settings:"kern","liga","clig","calt";font-feature-settings:"kern","liga","clig","calt","kern"}img{max-width:100%;margin:0 0 1.45rem;padding:10px;//border:1px solid #ddd;box-shadow:0 3px 3px #000;background:#eee;border-radius:5px}h1{font-size:2.25rem}h1,h2{margin:0 0 1.45rem;padding:0;color:inherit;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Fira Sans,Droid Sans,Helvetica Neue,sans-serif;font-weight:700;text-rendering:optimizeLegibility;line-height:1.1}h2{font-size:1.62671rem}h3{font-size:1.38316rem}h3,h4{margin:0 0 1.45rem;padding:0;color:inherit;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Fira Sans,Droid Sans,Helvetica Neue,sans-serif;font-weight:700;text-rendering:optimizeLegibility;line-height:1.1}h4{font-size:1rem}h5{font-size:.85028rem}h5,h6{margin:0 0 1.45rem;padding:0;color:inherit;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Fira Sans,Droid Sans,Helvetica Neue,sans-serif;font-weight:700;text-rendering:optimizeLegibility;line-height:1.1}h6{font-size:.78405rem}hgroup{margin:0 0 1.45rem;padding:0}ol,ul{margin:0 0 1.45rem 1.45rem;padding:0;list-style-position:outside;list-style-image:none}dd,dl,figure,p{margin:0 0 1.45rem;padding:0}pre{padding:0;font-size:.85rem;line-height:1.42;background:rgba(0,0,0,.04);border-radius:3px;overflow:auto;word-wrap:normal;padding:1.45rem}pre,table{margin:0 0 1.45rem}table{padding:0;font-size:1rem;line-height:1.45rem;border-collapse:collapse;width:100%}fieldset{margin:0 0 1.45rem;padding:0}blockquote{padding-left:1rem;padding-right:1rem;margin:0;margin-bottom:1.45rem;border-left:4px solid #ddd}form,iframe,noscript{margin:0 0 1.45rem;padding:0}hr{margin:0 0 calc(1.45rem - 1px);padding:0;background:rgba(0,0,0,.2);border:none;height:1px}address{margin:0 0 1.45rem;padding:0}b,dt,strong,th{font-weight:700}li{margin-bottom:.725rem}ol li,ul li{padding-left:0}li>ol,li>ul{margin-left:1.45rem;margin-bottom:.725rem;margin-top:.725rem}blockquote :last-child,li :last-child,p :last-child{margin-bottom:0}li>p{margin-bottom:.725rem}code,kbd,samp{font-size:.85rem;line-height:1.45rem}abbr,abbr[title],acronym{border-bottom:1px dotted rgba(0,0,0,.5);cursor:help}abbr[title]{text-decoration:none}td,th,thead{text-align:left}td,th{border-bottom:1px solid rgba(0,0,0,.12);font-feature-settings:"tnum";-moz-font-feature-settings:"tnum";-ms-font-feature-settings:"tnum";-webkit-font-feature-settings:"tnum";padding:.725rem .96667rem calc(.725rem - 1px)}td:first-child,th:first-child{padding-left:0}td:last-child,th:last-child{padding-right:0}code,tt{background-color:rgba(0,0,0,.04);border-radius:3px;font-family:SFMono-Regular,Consolas,Roboto Mono,Droid Sans Mono,Liberation Mono,Menlo,Courier,monospace;padding:0;padding-top:.2em;padding-bottom:.2em;padding-left:.4rem;margin-right:.2rem}pre code{background:none;line-height:1.42}code:after,code:before,tt:after,tt:before{letter-spacing:-.2em;content:" "}pre code:after,pre code:before,pre tt:after,pre tt:before{content:""}@media only screen and (max-width:480px){html{font-size:100%}}#toc{//:absolute;//:120px;//:15px;float:right;max-width:333px;font-size:14px;padding:10px 5px 0;background:#eee;border-radius:5px;margin:0 0 15px 15px;box-shadow:0 0 1px 1px rgba(0,0,0,.2)}#toc ul{margin-bottom:0;list-style-type:square}@media only screen and (max-width:1000px){#toc{max-width:200px}}#content-wrapper,#header-wrapper{max-width:1400px}@media only screen and (max-width:1200px){#content-wrapper,#header-wrapper{max-width:1100px}}.gatsby-resp-image-wrapper{border-radius:5px;box-shadow:0 0 3px rgba(0,0,0,.5);padding-bottom:13px}.gatsby-resp-image-background-image{border-radius:5px}.gatsby-highlight{margin-bottom:20px}pre{text-indent:-8px}.next-step-link-wrapper{border-top:1px solid rgba(0,0,0,.2)}.next-step-link-wrapper:after{content:"";display:block;clear:both}.next-step-link{float:right;font-size:20px;margin:20px 0}code[class*=language-],pre[class*=language-]{color:#000;background:none;text-shadow:0 1px #fff;font-family:Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-ms-hyphens:none;hyphens:none}code[class*=language-]::-moz-selection,code[class*=language-] ::-moz-selection,pre[class*=language-]::-moz-selection,pre[class*=language-] ::-moz-selection{text-shadow:none;background:#b3d4fc}code[class*=language-]::selection,code[class*=language-] ::selection,pre[class*=language-]::selection,pre[class*=language-] ::selection{text-shadow:none;background:#b3d4fc}@media print{code[class*=language-],pre[class*=language-]{text-shadow:none}}pre[class*=language-]{padding:1em;margin:.5em 0;overflow:auto}:not(pre)>code[class*=language-],pre[class*=language-]{background:#f5f2f0}:not(pre)>code[class*=language-]{padding:.1em;border-radius:.3em;white-space:normal}.token.cdata,.token.comment,.token.doctype,.token.prolog{color:#708090}.token.punctuation{color:#999}.namespace{opacity:.7}.token.boolean,.token.constant,.token.deleted,.token.number,.token.property,.token.symbol,.token.tag{color:#905}.token.attr-name,.token.builtin,.token.char,.token.inserted,.token.selector,.token.string{color:#690}.language-css .token.string,.style .token.string,.token.entity,.token.operator,.token.url{color:#a67f59;background:hsla(0,0%,100%,.5)}.token.atrule,.token.attr-value,.token.keyword{color:#07a}.token.function{color:#dd4a68}.token.important,.token.regex,.token.variable{color:#e90}.token.bold,.token.important{font-weight:700}.token.italic{font-style:italic}.token.entity{cursor:help}</style></head><body><div id="___gatsby"><div data-reactroot="" data-reactid="1" data-react-checksum="966400204"><!-- react-empty: 2 --><div style="background:#222;margin-bottom:2.5rem;" data-reactid="3"><div id="header-wrapper" style="margin:0 auto;padding:1.45rem 1.0875rem;" data-reactid="4"><h1 style="margin:0;" data-reactid="5"><a style="color:white;text-decoration:none;font-size:0.9em;line-height:1.5em;" href="/learning-react-and-redux-documentation/" data-reactid="6">Learning React and Redux</a></h1></div></div><div id="content-wrapper" style="margin:0 auto;padding:0px 1.0875rem 1.45rem;padding-top:0;" data-reactid="7"><div data-reactid="8"><aside id="toc" data-reactid="9"><ul data-reactid="10"><li data-reactid="11"><a href="/learning-react-and-redux-documentation/tutorial/getting-started" data-reactid="12"><!-- react-text: 13 -->Getting Started<!-- /react-text --></a></li><li data-reactid="14"><a href="/learning-react-and-redux-documentation/tutorial/steps/1-setup-package/" data-reactid="15"><!-- react-text: 16 -->Step 1: <!-- /react-text --><!-- react-text: 17 -->Generate the package.json<!-- /react-text --></a></li><li data-reactid="18"><a href="/learning-react-and-redux-documentation/tutorial/steps/2-webpack/" data-reactid="19"><!-- react-text: 20 -->Step 2: <!-- /react-text --><!-- react-text: 21 -->Setting up Webpack<!-- /react-text --></a></li><li data-reactid="22"><a href="/learning-react-and-redux-documentation/tutorial/steps/3-babel/" data-reactid="23"><!-- react-text: 24 -->Step 3: <!-- /react-text --><!-- react-text: 25 -->Setting up Babel<!-- /react-text --></a></li><li data-reactid="26"><a href="/learning-react-and-redux-documentation/tutorial/steps/4-eslint-and-prettier/" data-reactid="27"><!-- react-text: 28 -->Step 4: <!-- /react-text --><!-- react-text: 29 -->ESLint and Prettier<!-- /react-text --></a></li><li data-reactid="30"><a href="/learning-react-and-redux-documentation/tutorial/steps/5-starting-react/" data-reactid="31"><!-- react-text: 32 -->Step 5: <!-- /react-text --><!-- react-text: 33 -->Starting with React<!-- /react-text --></a></li><li data-reactid="34"><a href="/learning-react-and-redux-documentation/tutorial/steps/6-adding-the-map/" data-reactid="35"><!-- react-text: 36 -->Step 6: <!-- /react-text --><!-- react-text: 37 -->Adding the Map<!-- /react-text --></a></li><li data-reactid="38"><a href="/learning-react-and-redux-documentation/tutorial/steps/7-styling-with-postcss/" data-reactid="39"><!-- react-text: 40 -->Step 7: <!-- /react-text --><!-- react-text: 41 -->CSS Modules and PostCSS<!-- /react-text --></a></li><li data-reactid="42"><a href="/learning-react-and-redux-documentation/tutorial/steps/8-webpack-dev-server/" data-reactid="43"><!-- react-text: 44 -->Step 8: <!-- /react-text --><!-- react-text: 45 -->Webpack Dev Server<!-- /react-text --></a></li><li data-reactid="46"><a href="/learning-react-and-redux-documentation/tutorial/steps/9-adding-points-to-the-map/" data-reactid="47"><!-- react-text: 48 -->Step 9: <!-- /react-text --><!-- react-text: 49 -->Adding Points to the Map<!-- /react-text --></a></li><li data-reactid="50"><a href="/learning-react-and-redux-documentation/tutorial/steps/10-pointer-details/" data-reactid="51"><!-- react-text: 52 -->Step 10: <!-- /react-text --><!-- react-text: 53 -->Showing the Details of each Point<!-- /react-text --></a></li><li data-reactid="54"><a href="/learning-react-and-redux-documentation/tutorial/steps/11-favourite-places/" data-reactid="55"><!-- react-text: 56 -->Step 11: <!-- /react-text --><!-- react-text: 57 -->Favourite Places<!-- /react-text --></a></li><li data-reactid="58"><a href="/learning-react-and-redux-documentation/tutorial/steps/12-favourites-list/" data-reactid="59"><!-- react-text: 60 -->Step 12: <!-- /react-text --><!-- react-text: 61 -->Favourites List<!-- /react-text --></a></li><li data-reactid="62"><a href="/learning-react-and-redux-documentation/tutorial/steps/13-adding-redux/" data-reactid="63"><!-- react-text: 64 -->Step 13: <!-- /react-text --><!-- react-text: 65 -->Starting with Redux<!-- /react-text --></a></li><li data-reactid="66"><a href="/learning-react-and-redux-documentation/tutorial/steps/14-managing-favourites-with-redux/" data-reactid="67"><!-- react-text: 68 -->Step 14: <!-- /react-text --><!-- react-text: 69 -->Managing Favourites with Redux<!-- /react-text --></a></li><li data-reactid="70"><a href="/learning-react-and-redux-documentation/tutorial/steps/15-removing-favourites-from-the-list/" data-reactid="71"><!-- react-text: 72 -->Step 15: <!-- /react-text --><!-- react-text: 73 -->Removing Favourites from the List<!-- /react-text --></a></li><li data-reactid="74"><a href="/learning-react-and-redux-documentation/tutorial/steps/16-ids-for-points/" data-reactid="75"><!-- react-text: 76 -->Step 16: <!-- /react-text --><!-- react-text: 77 -->Adding IDs to the Points Data<!-- /react-text --></a></li><li data-reactid="78"><a href="/learning-react-and-redux-documentation/tutorial/steps/17-testing-with-jest/" data-reactid="79"><!-- react-text: 80 -->Step 17: <!-- /react-text --><!-- react-text: 81 -->Testing with Jest<!-- /react-text --></a></li><li data-reactid="82"><a href="/learning-react-and-redux-documentation/tutorial/steps/18-testing-redux-actions/" data-reactid="83"><!-- react-text: 84 -->Step 18: <!-- /react-text --><!-- react-text: 85 -->Testing Redux Actions<!-- /react-text --></a></li><li data-reactid="86"><a href="/learning-react-and-redux-documentation/tutorial/steps/19-testing-redux-reducers/" data-reactid="87"><!-- react-text: 88 -->Step 19: <!-- /react-text --><!-- react-text: 89 -->Testing Redux Reducers<!-- /react-text --></a></li><li data-reactid="90"><a href="/learning-react-and-redux-documentation/tutorial/steps/20-jest-component-configuration/" data-reactid="91"><!-- react-text: 92 -->Step 20: <!-- /react-text --><!-- react-text: 93 -->Preparing Component testing with Jest<!-- /react-text --></a></li><li data-reactid="94"><a href="/learning-react-and-redux-documentation/tutorial/steps/21-testing-the-map/" data-reactid="95"><!-- react-text: 96 -->Step 21: <!-- /react-text --><!-- react-text: 97 -->Testing the Map<!-- /react-text --></a></li><li data-reactid="98"><a href="/learning-react-and-redux-documentation/tutorial/steps/22-testing-connected-components/" data-reactid="99"><!-- react-text: 100 -->Step 22: <!-- /react-text --><!-- react-text: 101 -->Testing Connected Components<!-- /react-text --></a></li><li data-reactid="102"><a href="/learning-react-and-redux-documentation/tutorial/steps/23-test-the-app-component/" data-reactid="103"><!-- react-text: 104 -->Step 23: <!-- /react-text --><!-- react-text: 105 -->Testing the App Component<!-- /react-text --></a></li><li data-reactid="106"><a href="/learning-react-and-redux-documentation/tutorial/steps/24-test-favourites-list/" data-reactid="107"><!-- react-text: 108 -->Step 24: <!-- /react-text --><!-- react-text: 109 -->Testing the Favourites List<!-- /react-text --></a></li><li data-reactid="110"><a href="/learning-react-and-redux-documentation/tutorial/steps/25-test-the-pointer/" data-reactid="111"><!-- react-text: 112 -->Step 25: <!-- /react-text --><!-- react-text: 113 -->Testing the Pointer<!-- /react-text --></a></li><li data-reactid="114"><a href="/learning-react-and-redux-documentation/tutorial/links" data-reactid="115"><!-- react-text: 116 -->Links<!-- /react-text --></a></li></ul></aside><h1 data-reactid="117">Testing Connected Components</h1><h3 data-reactid="118"><!-- react-text: 119 -->Step <!-- /react-text --><!-- react-text: 120 -->22<!-- /react-text --></h3><div data-reactid="121"><p>Testing components that are connected with Redux is a little tricker as you
cannot simply mount the component with enzyme until you have mocked the store,
otherwise errors will occur. In order to make this process simple we can use an
open source packages called <code>redux-mock-store</code>.</p>
<p>Let's get started by installing this to our development dependencies.</p>
<div class="gatsby-highlight">
      <pre class="language-bash"><code>yarn add --dev redux-mock-store
</code></pre>
      </div>
<p>No configuration is necessary so we can jump right back into the <code>Map</code> spec and
begin creating a mock store.</p>
<p>We will add a new top-level <code>describe</code> context to the spec which will concern
the connected version of the <code>Map</code>. This means we will also have to import the
<code>ConnectedMap</code> component.</p>
<div class="gatsby-highlight">
      <pre class="language-diff"><code>// app/js/components/Map/__specs__/Map.spec.jsx

  import React from 'react';
  import { shallow } from 'enzyme';

  import { pointsMock } from '../../../spec-helper';
<span class="token deleted">- import { Map } from '../';</span>
<span class="token inserted">+ import ConnectedMap, { Map } from '../';</span>

  describe('Map component', () => {
    describe('when there are no points', () => {
      it('matches the snapshot', () => {
        const wrapper = shallow(&lt;Map points={[]} />);

        expect(wrapper).toMatchSnapshot();
      });
    });

    describe('when there are points', () => {
      it('matches the snapshot', () => {
        const wrapper = shallow(&lt;Map points={pointsMock} />);

        expect(wrapper).toMatchSnapshot();
      });
    });
  });
<span class="token inserted">+</span>
<span class="token inserted">+ describe('ConnectedMap component', () => {});</span>
</code></pre>
      </div>
<p>We can now import the <code>configureStore</code> function from <code>redux-mock-store</code>. We call
this function and pass it Redux a list of middleware libraries that our
application uses. Since we do not have any custom middleware in this application
we will pass an empty array to <code>configureStore</code>. This function returns a new
function which we will name <code>mockStore</code> that allows us to build a mocked Redux
store. We can pass any data we want to the <code>mockStore</code> function and it will be
used as the store state. The returned value from <code>mockStore</code> is the Redux store
object which we must give to the connected component we want to test as a prop.</p>
<p>We will pass the <code>pointsMock</code> mock data as our store value. We must however pass
an object <code>{ points: pointsMock }</code> because we are telling the mock store that
the <code>pointsMock</code> array is the state of the <code>points</code> reducer. Basically, the keys
of the object you pass must match the reducer names that were defined in your
<code>combineReducers</code> call inside of <code>app/js/reducers/index.js</code>.</p>
<p>The final step, as with the unconnected components, is to mount the component
using <code>shallow</code> and tell Jest to expect the mounted component matches the
snapshot.</p>
<div class="gatsby-highlight">
      <pre class="language-diff"><code>// app/js/components/Map/__specs__/Map.spec.jsx

  import React from 'react';
  import { shallow } from 'enzyme';
<span class="token inserted">+ import configureStore from 'redux-mock-store';</span>

  describe('ConnectedMap component', () => {
<span class="token inserted">+   const mockStore = configureStore([]);</span>
<span class="token inserted">+   const store = mockStore({ points: pointsMock });</span>
<span class="token inserted">+</span>
<span class="token inserted">+   it('maps store state to the props', () => {</span>
<span class="token inserted">+     const wrapper = shallow(&lt;ConnectedMap store={store} />);</span>
<span class="token inserted">+</span>
<span class="token inserted">+     expect(wrapper).toMatchSnapshot();</span>
<span class="token inserted">+   });</span>
  });
</code></pre>
      </div>
<p>If you run the tests with <code>yarn test</code> in your terminal you should see all tests
passing and a new snapshot for the connected component has been written.</p>
<p>Take a look at the
<code>app/js/components/Map/__specs__/__snapshots__/Map.spec.jsx.snap</code> file and you
will see the following snapshot has been written.</p>
<div class="gatsby-highlight">
      <pre class="language-jsx"><code>exports<span class="token punctuation">[</span><span class="token template-string"><span class="token string">`ConnectedMap component maps store state to the props 1`</span></span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token template-string"><span class="token string">`
&lt;Map
  dispatch={[Function]}
  points={
    Array [
      Object {
        "details": Object {
          "house": "Night's Watch",
          "name": "The Wall",
          "words": "Night gathers, and now my watch begins.",
        },
        "favourite": true,
        "id": 1,
        "x": 450,
        "y": 110,
      },
      Object {
        "details": Object {
          "house": "Stark",
          "name": "Winterfell",
          "words": "Winter is Coming",
        },
        "favourite": false,
        "id": 2,
        "x": 375,
        "y": 355,
      },
    ]
  }
  store={
    Object {
      "clearActions": [Function],
      "dispatch": [Function],
      "getActions": [Function],
      "getState": [Function],
      "replaceReducer": [Function],
      "subscribe": [Function],
    }
  }
  storeSubscription={
    Subscription {
      "listeners": Object {
        "clear": [Function],
        "get": [Function],
        "notify": [Function],
        "subscribe": [Function],
      },
      "onStateChange": [Function],
      "parentSub": undefined,
      "store": Object {
        "clearActions": [Function],
        "dispatch": [Function],
        "getActions": [Function],
        "getState": [Function],
        "replaceReducer": [Function],
        "subscribe": [Function],
      },
      "unsubscribe": [Function],
    }
  }
/>
`</span></span><span class="token punctuation">;</span>
</code></pre>
      </div>
<p>Although we don't see the actual <code>Pointer</code> instances that the <code>Map</code> would
generate with this data as we can see in the unconnected snapshots, we do see
what information Redux is passing to the <code>Map</code>. The <code>store</code>,
<code>storeSubscription</code>, and <code>dispatch</code> props can be ignored as they are internals
of <code>react-redux</code> but we do see the <code>points</code> prop that Redux will automatically
pass into the <code>Map</code> component is the mock data that we expected from the store.
This tells us the <code>mapStateToProps</code> function from the <code>Map</code> is working
correctly.</p>
<p>We now know how to test connected and unconnected components. We will continue
in the next steps to cover the rest of our components, starting with the <code>App</code>.</p></div><p class="next-step-link-wrapper" data-reactid="122"><a class="next-step-link" href="../../../tutorial/steps/23-test-the-app-component/" data-reactid="123">Continue to Step 23: Testing the App Component &raquo;</a></p></div></div></div></div></body></html>