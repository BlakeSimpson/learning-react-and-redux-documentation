<!DOCTYPE html>
 <html><head><meta charset="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><link rel="preload" href="/learning-react-and-redux-documentation/component---src-layouts-index-js-616843d721f40ddfd4aa.js" as="script"/><link rel="preload" href="/learning-react-and-redux-documentation/component---src-templates-post-js-00a9cc51cc7412ed4550.js" as="script"/><link rel="preload" href="/learning-react-and-redux-documentation/path---tutorial-steps-24-test-favourites-list-9cd5dd8cd84a11e02515.js" as="script"/><link rel="preload" href="/learning-react-and-redux-documentation/app-17fd3e9f066046281c24.js" as="script"/><link rel="preload" href="/learning-react-and-redux-documentation/commons-8d5048b07969403445b0.js" as="script"/><script id="webpack-manifest">
            //<![CDATA[
            window.webpackManifest = {"231608221292675":"app-17fd3e9f066046281c24.js","195351340454287":"component---src-templates-post-js-00a9cc51cc7412ed4550.js","162898551421021":"component---src-pages-404-js-4503918ea3a16cfcdb75.js","35783957827783":"component---src-pages-index-js-74e63cc5e6a75c49970b.js","60335399758886":"path----d56a5c009c65cb248351.js","118799121156847":"path---tutorial-getting-started-a1afe45e25dd8cef4eee.js","135563891114638":"path---tutorial-links-02a4ba57870b9b0e9f1b.js","214057910109245":"path---tutorial-steps-1-setup-package-073b2ee9a0ec456a07c8.js","132978315027406":"path---tutorial-steps-11-favourite-places-98eb32d90bc281d3b214.js","206805960689390":"path---tutorial-steps-10-pointer-details-5ef4b52c6105bdcf91af.js","17971265750924":"path---tutorial-steps-12-favourites-list-79b6603d27d0811e4304.js","237949882381156":"path---tutorial-steps-13-adding-redux-32b4ad328d81736e7cdc.js","181225226889932":"path---tutorial-steps-15-removing-favourites-from-the-list-32a1bc01d3c596256dca.js","1033659491245":"path---tutorial-steps-14-managing-favourites-with-redux-fccdd698e5ae5f2c80ce.js","119454655196054":"path---tutorial-steps-17-testing-with-jest-f883038578e7decc9303.js","118277567452233":"path---tutorial-steps-16-ids-for-points-d819ae46b0e220481470.js","182874657879501":"path---tutorial-steps-18-testing-redux-actions-4de036f8abb7aa2792c9.js","191994760325403":"path---tutorial-steps-20-jest-component-configuration-fe447a81c63b5cccd0a7.js","164006660818621":"path---tutorial-steps-19-testing-redux-reducers-361fbcd028537d028163.js","86486738803091":"path---tutorial-steps-2-webpack-8e795389e9b33fadd4ba.js","179161860437318":"path---tutorial-steps-21-testing-the-map-2af3f09ba964f5342ee7.js","227242793964653":"path---tutorial-steps-23-test-the-app-component-3efa994b0ef25115d48f.js","169013477403742":"path---tutorial-steps-24-test-favourites-list-9cd5dd8cd84a11e02515.js","164153876557642":"path---tutorial-steps-22-testing-connected-components-6a9ae35c63f3b7a65d0a.js","280001054470434":"path---tutorial-steps-3-babel-552e939e714b135e0f9e.js","198134931227272":"path---tutorial-steps-25-test-the-pointer-72cf96f0aef4e359a514.js","46414529011902":"path---tutorial-steps-4-eslint-and-prettier-980cdc0376b4ef0da734.js","97838741517688":"path---tutorial-steps-5-starting-react-4b38330d33cf455d1f10.js","165467095976884":"path---tutorial-steps-9-adding-points-to-the-map-ecb150f8d4e5af42eb1a.js","235804080668192":"path---tutorial-steps-6-adding-the-map-9c2c5da553ca4c65c976.js","46098157417510":"path---tutorial-steps-8-webpack-dev-server-c0437f6e4388e2667b78.js","172606999645938":"path---tutorial-steps-7-styling-with-postcss-00a02c857f22eddfe1b8.js","254022195166212":"path---404-a0e39f21c11f6a62c5ab.js","142629428675168":"path---index-bf927d9d0aaca4ce2fcd.js","178698757827068":"path---404-html-a0e39f21c11f6a62c5ab.js","114276838955818":"component---src-layouts-index-js-616843d721f40ddfd4aa.js"}
            //]]>
            </script><title data-react-helmet="true">Learning React and Redux</title><meta data-react-helmet="true" name="description" content="A tutorial for learning React and Redux"/><meta data-react-helmet="true" name="keywords" content="react, redux, tutorial"/><script>
  !function(e,t,r){function n(){for(;d[0]&&"loaded"==d[0][f];)c=d.shift(),c[o]=!i.parentNode.insertBefore(c,i)}for(var s,a,c,d=[],i=e.scripts[0],o="onreadystatechange",f="readyState";s=r.shift();)a=e.createElement(t),"async"in i?(a.async=!1,e.head.appendChild(a)):i[f]?(d.push(a),a[o]=n):e.write("<"+t+' src="'+s+'" defer></'+t+">"),a.src=s}(document,"script",[
  "/learning-react-and-redux-documentation/commons-8d5048b07969403445b0.js","/learning-react-and-redux-documentation/app-17fd3e9f066046281c24.js","/learning-react-and-redux-documentation/path---tutorial-steps-24-test-favourites-list-9cd5dd8cd84a11e02515.js","/learning-react-and-redux-documentation/component---src-templates-post-js-00a9cc51cc7412ed4550.js","/learning-react-and-redux-documentation/component---src-layouts-index-js-616843d721f40ddfd4aa.js"
])
  </script><style id="gatsby-inlined-css">html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}body{margin:0}article,aside,details,figcaption,figure,footer,header,main,menu,nav,section,summary{display:block}audio,canvas,progress,video{display:inline-block}audio:not([controls]){display:none;height:0}progress{vertical-align:baseline}[hidden],template{display:none}a{background-color:transparent;-webkit-text-decoration-skip:objects}a:active,a:hover{outline-width:0}abbr[title]{border-bottom:none;text-decoration:underline;text-decoration:underline dotted}b,strong{font-weight:inherit;font-weight:bolder}dfn{font-style:italic}h1{font-size:2em;margin:.67em 0}mark{background-color:#ff0;color:#000}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}img{border-style:none}svg:not(:root){overflow:hidden}code,kbd,pre,samp{font-family:monospace,monospace;font-size:1em}figure{margin:1em 40px}hr{box-sizing:content-box;height:0;overflow:visible}button,input,optgroup,select,textarea{font:inherit;margin:0}optgroup{font-weight:700}button,input{overflow:visible}button,select{text-transform:none}[type=reset],[type=submit],button,html [type=button]{-webkit-appearance:button}[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner,button::-moz-focus-inner{border-style:none;padding:0}[type=button]:-moz-focusring,[type=reset]:-moz-focusring,[type=submit]:-moz-focusring,button:-moz-focusring{outline:1px dotted ButtonText}fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}legend{box-sizing:border-box;color:inherit;display:table;max-width:100%;padding:0;white-space:normal}textarea{overflow:auto}[type=checkbox],[type=radio]{box-sizing:border-box;padding:0}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}[type=search]::-webkit-search-cancel-button,[type=search]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-input-placeholder{color:inherit;opacity:.54}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}html{font:112.5%/1.45em georgia,serif;box-sizing:border-box;overflow-y:scroll}*,:after,:before{box-sizing:inherit}body{color:rgba(0,0,0,.8);font-family:georgia,serif;font-weight:400;word-wrap:break-word;-webkit-font-kerning:normal;font-kerning:normal;-ms-font-feature-settings:"kern","liga","clig","calt";-webkit-font-feature-settings:"kern","liga","clig","calt";font-feature-settings:"kern","liga","clig","calt","kern"}img{max-width:100%;margin:0 0 1.45rem;padding:10px;//border:1px solid #ddd;box-shadow:0 3px 3px #000;background:#eee;border-radius:5px}h1{font-size:2.25rem}h1,h2{margin:0 0 1.45rem;padding:0;color:inherit;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Fira Sans,Droid Sans,Helvetica Neue,sans-serif;font-weight:700;text-rendering:optimizeLegibility;line-height:1.1}h2{font-size:1.62671rem}h3{font-size:1.38316rem}h3,h4{margin:0 0 1.45rem;padding:0;color:inherit;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Fira Sans,Droid Sans,Helvetica Neue,sans-serif;font-weight:700;text-rendering:optimizeLegibility;line-height:1.1}h4{font-size:1rem}h5{font-size:.85028rem}h5,h6{margin:0 0 1.45rem;padding:0;color:inherit;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Fira Sans,Droid Sans,Helvetica Neue,sans-serif;font-weight:700;text-rendering:optimizeLegibility;line-height:1.1}h6{font-size:.78405rem}hgroup{margin:0 0 1.45rem;padding:0}ol,ul{margin:0 0 1.45rem 1.45rem;padding:0;list-style-position:outside;list-style-image:none}dd,dl,figure,p{margin:0 0 1.45rem;padding:0}pre{padding:0;font-size:.85rem;line-height:1.42;background:rgba(0,0,0,.04);border-radius:3px;overflow:auto;word-wrap:normal;padding:1.45rem}pre,table{margin:0 0 1.45rem}table{padding:0;font-size:1rem;line-height:1.45rem;border-collapse:collapse;width:100%}fieldset{margin:0 0 1.45rem;padding:0}blockquote{padding-left:1rem;padding-right:1rem;margin:0;margin-bottom:1.45rem;border-left:4px solid #ddd}form,iframe,noscript{margin:0 0 1.45rem;padding:0}hr{margin:0 0 calc(1.45rem - 1px);padding:0;background:rgba(0,0,0,.2);border:none;height:1px}address{margin:0 0 1.45rem;padding:0}b,dt,strong,th{font-weight:700}li{margin-bottom:.725rem}ol li,ul li{padding-left:0}li>ol,li>ul{margin-left:1.45rem;margin-bottom:.725rem;margin-top:.725rem}blockquote :last-child,li :last-child,p :last-child{margin-bottom:0}li>p{margin-bottom:.725rem}code,kbd,samp{font-size:.85rem;line-height:1.45rem}abbr,abbr[title],acronym{border-bottom:1px dotted rgba(0,0,0,.5);cursor:help}abbr[title]{text-decoration:none}td,th,thead{text-align:left}td,th{border-bottom:1px solid rgba(0,0,0,.12);font-feature-settings:"tnum";-moz-font-feature-settings:"tnum";-ms-font-feature-settings:"tnum";-webkit-font-feature-settings:"tnum";padding:.725rem .96667rem calc(.725rem - 1px)}td:first-child,th:first-child{padding-left:0}td:last-child,th:last-child{padding-right:0}code,tt{background-color:rgba(0,0,0,.04);border-radius:3px;font-family:SFMono-Regular,Consolas,Roboto Mono,Droid Sans Mono,Liberation Mono,Menlo,Courier,monospace;padding:0;padding-top:.2em;padding-bottom:.2em;padding-left:.4rem;margin-right:.2rem}pre code{background:none;line-height:1.42}code:after,code:before,tt:after,tt:before{letter-spacing:-.2em;content:" "}pre code:after,pre code:before,pre tt:after,pre tt:before{content:""}@media only screen and (max-width:480px){html{font-size:100%}}#toc{position:absolute;top:120px;right:15px;padding:20px 10px 5px;background:#eee;border-radius:5px;margin:0 0 15px 15px;box-shadow:0 0 1px 1px rgba(0,0,0,.2)}#toc ul{margin-bottom:0;list-style-type:square}.gatsby-resp-image-wrapper{border-radius:5px;box-shadow:0 0 3px rgba(0,0,0,.5);padding-bottom:13px}.gatsby-resp-image-background-image{border-radius:5px}.gatsby-highlight{margin-bottom:20px}code[class*=language-],pre[class*=language-]{color:#000;background:none;text-shadow:0 1px #fff;font-family:Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-ms-hyphens:none;hyphens:none}code[class*=language-]::-moz-selection,code[class*=language-] ::-moz-selection,pre[class*=language-]::-moz-selection,pre[class*=language-] ::-moz-selection{text-shadow:none;background:#b3d4fc}code[class*=language-]::selection,code[class*=language-] ::selection,pre[class*=language-]::selection,pre[class*=language-] ::selection{text-shadow:none;background:#b3d4fc}@media print{code[class*=language-],pre[class*=language-]{text-shadow:none}}pre[class*=language-]{padding:1em;margin:.5em 0;overflow:auto}:not(pre)>code[class*=language-],pre[class*=language-]{background:#f5f2f0}:not(pre)>code[class*=language-]{padding:.1em;border-radius:.3em;white-space:normal}.token.cdata,.token.comment,.token.doctype,.token.prolog{color:#708090}.token.punctuation{color:#999}.namespace{opacity:.7}.token.boolean,.token.constant,.token.deleted,.token.number,.token.property,.token.symbol,.token.tag{color:#905}.token.attr-name,.token.builtin,.token.char,.token.inserted,.token.selector,.token.string{color:#690}.language-css .token.string,.style .token.string,.token.entity,.token.operator,.token.url{color:#a67f59;background:hsla(0,0%,100%,.5)}.token.atrule,.token.attr-value,.token.keyword{color:#07a}.token.function{color:#dd4a68}.token.important,.token.regex,.token.variable{color:#e90}.token.bold,.token.important{font-weight:700}.token.italic{font-style:italic}.token.entity{cursor:help}</style></head><body><div id="___gatsby"><div data-reactroot="" data-reactid="1" data-react-checksum="-1152223789"><!-- react-empty: 2 --><div style="background:#222;margin-bottom:2.5rem;" data-reactid="3"><div style="margin:0 auto;max-width:960px;padding:1.45rem 1.0875rem;" data-reactid="4"><h1 style="margin:0;" data-reactid="5"><a style="color:white;text-decoration:none;font-size:0.9em;line-height:1.5em;" href="/learning-react-and-redux-documentation/" data-reactid="6">Learning React and Redux</a></h1></div></div><div style="margin:0 auto;max-width:960px;padding:0px 1.0875rem 1.45rem;padding-top:0;" data-reactid="7"><div data-reactid="8"><aside id="toc" data-reactid="9"><ul data-reactid="10"><li data-reactid="11"><a href="/learning-react-and-redux-documentation/tutorial/getting-started" data-reactid="12"><!-- react-text: 13 -->Getting Started<!-- /react-text --></a></li><li data-reactid="14"><a href="/learning-react-and-redux-documentation/tutorial/steps/1-setup-package/" data-reactid="15"><!-- react-text: 16 -->Step 1: <!-- /react-text --><!-- react-text: 17 -->Generate the package.json<!-- /react-text --></a></li><li data-reactid="18"><a href="/learning-react-and-redux-documentation/tutorial/steps/2-webpack/" data-reactid="19"><!-- react-text: 20 -->Step 2: <!-- /react-text --><!-- react-text: 21 -->Setting up Webpack<!-- /react-text --></a></li><li data-reactid="22"><a href="/learning-react-and-redux-documentation/tutorial/steps/3-babel/" data-reactid="23"><!-- react-text: 24 -->Step 3: <!-- /react-text --><!-- react-text: 25 -->Setting up Babel<!-- /react-text --></a></li><li data-reactid="26"><a href="/learning-react-and-redux-documentation/tutorial/steps/4-eslint-and-prettier/" data-reactid="27"><!-- react-text: 28 -->Step 4: <!-- /react-text --><!-- react-text: 29 -->ESLint and Prettier<!-- /react-text --></a></li><li data-reactid="30"><a href="/learning-react-and-redux-documentation/tutorial/steps/5-starting-react/" data-reactid="31"><!-- react-text: 32 -->Step 5: <!-- /react-text --><!-- react-text: 33 -->Starting with React<!-- /react-text --></a></li><li data-reactid="34"><a href="/learning-react-and-redux-documentation/tutorial/steps/6-adding-the-map/" data-reactid="35"><!-- react-text: 36 -->Step 6: <!-- /react-text --><!-- react-text: 37 -->Adding the Map<!-- /react-text --></a></li><li data-reactid="38"><a href="/learning-react-and-redux-documentation/tutorial/steps/7-styling-with-postcss/" data-reactid="39"><!-- react-text: 40 -->Step 7: <!-- /react-text --><!-- react-text: 41 -->CSS Modules and PostCSS<!-- /react-text --></a></li><li data-reactid="42"><a href="/learning-react-and-redux-documentation/tutorial/steps/8-webpack-dev-server/" data-reactid="43"><!-- react-text: 44 -->Step 8: <!-- /react-text --><!-- react-text: 45 -->Webpack Dev Server<!-- /react-text --></a></li><li data-reactid="46"><a href="/learning-react-and-redux-documentation/tutorial/steps/9-adding-points-to-the-map/" data-reactid="47"><!-- react-text: 48 -->Step 9: <!-- /react-text --><!-- react-text: 49 -->Adding Points to the Map<!-- /react-text --></a></li><li data-reactid="50"><a href="/learning-react-and-redux-documentation/tutorial/steps/10-pointer-details/" data-reactid="51"><!-- react-text: 52 -->Step 10: <!-- /react-text --><!-- react-text: 53 -->Showing the Details of each Point<!-- /react-text --></a></li><li data-reactid="54"><a href="/learning-react-and-redux-documentation/tutorial/steps/11-favourite-places/" data-reactid="55"><!-- react-text: 56 -->Step 11: <!-- /react-text --><!-- react-text: 57 -->Favourite Places<!-- /react-text --></a></li><li data-reactid="58"><a href="/learning-react-and-redux-documentation/tutorial/steps/12-favourites-list/" data-reactid="59"><!-- react-text: 60 -->Step 12: <!-- /react-text --><!-- react-text: 61 -->Favourites List<!-- /react-text --></a></li><li data-reactid="62"><a href="/learning-react-and-redux-documentation/tutorial/steps/13-adding-redux/" data-reactid="63"><!-- react-text: 64 -->Step 13: <!-- /react-text --><!-- react-text: 65 -->Starting with Redux<!-- /react-text --></a></li><li data-reactid="66"><a href="/learning-react-and-redux-documentation/tutorial/steps/14-managing-favourites-with-redux/" data-reactid="67"><!-- react-text: 68 -->Step 14: <!-- /react-text --><!-- react-text: 69 -->Managing Favourites with Redux<!-- /react-text --></a></li><li data-reactid="70"><a href="/learning-react-and-redux-documentation/tutorial/steps/15-removing-favourites-from-the-list/" data-reactid="71"><!-- react-text: 72 -->Step 15: <!-- /react-text --><!-- react-text: 73 -->Removing Favourites from the List<!-- /react-text --></a></li><li data-reactid="74"><a href="/learning-react-and-redux-documentation/tutorial/steps/16-ids-for-points/" data-reactid="75"><!-- react-text: 76 -->Step 16: <!-- /react-text --><!-- react-text: 77 -->Adding IDs to the Points Data<!-- /react-text --></a></li><li data-reactid="78"><a href="/learning-react-and-redux-documentation/tutorial/steps/17-testing-with-jest/" data-reactid="79"><!-- react-text: 80 -->Step 17: <!-- /react-text --><!-- react-text: 81 -->Testing with Jest<!-- /react-text --></a></li><li data-reactid="82"><a href="/learning-react-and-redux-documentation/tutorial/steps/18-testing-redux-actions/" data-reactid="83"><!-- react-text: 84 -->Step 18: <!-- /react-text --><!-- react-text: 85 -->Testing Redux Actions<!-- /react-text --></a></li><li data-reactid="86"><a href="/learning-react-and-redux-documentation/tutorial/steps/19-testing-redux-reducers/" data-reactid="87"><!-- react-text: 88 -->Step 19: <!-- /react-text --><!-- react-text: 89 -->Testing Redux Reducers<!-- /react-text --></a></li><li data-reactid="90"><a href="/learning-react-and-redux-documentation/tutorial/steps/20-jest-component-configuration/" data-reactid="91"><!-- react-text: 92 -->Step 20: <!-- /react-text --><!-- react-text: 93 -->Preparing Component testing with Jest<!-- /react-text --></a></li><li data-reactid="94"><a href="/learning-react-and-redux-documentation/tutorial/steps/21-testing-the-map/" data-reactid="95"><!-- react-text: 96 -->Step 21: <!-- /react-text --><!-- react-text: 97 -->Testing the Map<!-- /react-text --></a></li><li data-reactid="98"><a href="/learning-react-and-redux-documentation/tutorial/steps/22-testing-connected-components/" data-reactid="99"><!-- react-text: 100 -->Step 22: <!-- /react-text --><!-- react-text: 101 -->Testing Connected Components<!-- /react-text --></a></li><li data-reactid="102"><a href="/learning-react-and-redux-documentation/tutorial/steps/23-test-the-app-component/" data-reactid="103"><!-- react-text: 104 -->Step 23: <!-- /react-text --><!-- react-text: 105 -->Testing the App Component<!-- /react-text --></a></li><li data-reactid="106"><a href="/learning-react-and-redux-documentation/tutorial/steps/24-test-favourites-list/" data-reactid="107"><!-- react-text: 108 -->Step 24: <!-- /react-text --><!-- react-text: 109 -->Testing the Favourites List<!-- /react-text --></a></li><li data-reactid="110"><a href="/learning-react-and-redux-documentation/tutorial/steps/25-test-the-pointer/" data-reactid="111"><!-- react-text: 112 -->Step 25: <!-- /react-text --><!-- react-text: 113 -->Testing the Pointer<!-- /react-text --></a></li><li data-reactid="114"><a href="/learning-react-and-redux-documentation/tutorial/links" data-reactid="115"><!-- react-text: 116 -->Links<!-- /react-text --></a></li></ul></aside><h1 data-reactid="117">Testing the Favourites List</h1><h3 data-reactid="118"><!-- react-text: 119 -->Step <!-- /react-text --><!-- react-text: 120 -->24<!-- /react-text --></h3><div data-reactid="121"><p>We will now test the <code>FavouritesList</code> component. We will start with the
unconnected version before continuing to test the connected Redux state. Finally
we will discover how to test user interactions by simulating a click on the
remove button.</p>
<h2>Testing the Unconnected FavouritesList</h2>
<p>The testing of the unconnected component should be coming familiar to you now.
We will follow the same pattern as we have done with the previous components,
this spec is especially similar to the <code>Map</code> spec.</p>
<p>First we import <code>React</code>, <code>shallow</code> from enzyme, the unconnected component we
want to test, and the mocked data.</p>
<p>We then defined our <code>describe</code> contexts with the tests defined with <code>it</code> inside
of them. We mount the components using <code>shallow</code> and use <code>expect</code> from Jest
along with the <code>toMatchSnapshot</code> matcher.</p>
<p>The only difference we have here is that the <code>FavouritesList</code> expects a prop
called <code>remove</code>, which if you remember, is the <code>removeFavourite</code> action being
passed to the component by Redux via the <code>mapDispatchToProps</code> function inside of
the component. Since we are not testing the Redux functionality here we can
simply pass an empty function that does nothing, since the <code>remove</code> prop will
not be called form this test. We call this function <code>noop</code> which is a convention
for a function that does nothing. It is short for "no operation".</p>
<pre><code class="language-jsx">// app/js/components/FavouritesList/__specs__/FavouritesList.spec.jsx

import React from 'react';
import { shallow } from 'enzyme';

import { pointsMock } from '../../../spec-helper';
import { FavouritesList } from '../';

const noop = () => {};

describe('FavouritesList component', () => {
  describe('when there are no points', () => {
    it('matches the snapshot', () => {
      const wrapper = shallow(&#x3C;FavouritesList points={[]} remove={noop} />);

      expect(wrapper).toMatchSnapshot();
    });
  });

  describe('When there are points', () => {
    it('matches the snapshot', () => {
      const wrapper = shallow(
        &#x3C;FavouritesList points={pointsMock} remove={noop} />
      );

      expect(wrapper).toMatchSnapshot();
    });
  });
});
</code></pre>
<p>If you run the tests this new spec should be passing. You can take a look at the
snapshot to ensure the generated DOM is what you expect.</p>
<h2>Testing the Connected FavouritesList</h2>
<p>We will continue as we did with the <code>Map</code> component by importing
<code>configureStore</code> as well as the connected version of the component.</p>
<p>We then define a new <code>describe</code> context at the bottom of the file that contains
the test which will build our mock store, pass the mock data as the store state,
mount the connected component using <code>shallow</code>, and finally expected that the
mounted component matches the snapshot.</p>
<pre><code class="language-diff">// app/js/components/FavouritesList/__specs__/FavouritesList.spec.jsx

  import React from 'react';
  import { shallow } from 'enzyme';
+ import configureStore from 'redux-mock-store';


  import { pointsMock } from '../../../spec-helper';
- import { FavouritesList } from '../';
+ import ConnectedFavouritesList, { FavouritesList } from '../';

  const noop = () => {};

  describe('FavouritesList component', () => {
    describe('when there are no points', () => {
      it('matches the snapshot', () => {
        const wrapper = shallow(&#x3C;FavouritesList points={[]} remove={noop} />);

        expect(wrapper).toMatchSnapshot();
      });
    });

    describe('When there are points', () => {
      it('matches the snapshot', () => {
        const wrapper = shallow(
          &#x3C;FavouritesList points={pointsMock} remove={noop} />
        );

        expect(wrapper).toMatchSnapshot();
      });
    });
  });
+
+ describe('ConnectedFavouritesList component', () => {
+   const mockStore = configureStore([]);
+   const store = mockStore({ points: pointsMock });
+
+   it('maps store state to the props', () => {
+     const wrapper = shallow(&#x3C;ConnectedFavouritesList store={store} />);
+
+     expect(wrapper).toMatchSnapshot();
+   });
+ });
</code></pre>
<p>Run the tests again to ensure the connected spec is working as expected and your
snapshot file is re-written.</p>
<h2>Simulating User Interactions</h2>
<p>The final step of testing the <code>FavouritesList</code> component is testing that when
the remove button is clicked, the <code>removeFavourite</code> redux action is dispatched.</p>
<p>We do this by first of all importing the <code>removeFavourite</code> action that we will
expect to be dispatched.</p>
<pre><code class="language-diff">// app/js/components/FavouritesList/__specs__/FavouritesList.spec.jsx

  import { pointsMock } from '../../../spec-helper';
+ import { removeFavourite } from '../../../actions';
  import ConnectedFavouritesList, { FavouritesList } from '../';
</code></pre>
<p>Next we import the <code>mount</code> function from enzyme that will do a full mount of our
component, allowing us to trigger simulated events such as the button click.</p>
<pre><code class="language-diff">// app/js/components/FavouritesList/__specs__/FavouritesList.spec.jsx

- import { shallow } from 'enzyme';
+ import { shallow, mount } from 'enzyme';
</code></pre>
<p>Finally we will add a new context and test inside of the
"ConnectedFavouritesList component" <code>describe</code> that will mount the connected
component using the <code>mount</code> function instead of <code>shallow</code>. We then use enzyme to
to search inside the mounted component (<code>wrapper</code>) for the first <code>&#x3C;button></code> tag
and simulate a click on it. It will find the first button in the list which is
associated with <code>point-1</code>.</p>
<p>We define in <code>expectedAction</code> that we expect the <code>removeFavourite</code> to be called
with the ID of our point. Finally we use Jest to <code>expect</code> that the actions that
been dispatched to the store match the ones we expected.</p>
<p>By doing this we don't only test that the <code>remove</code> prop has been called but that
the Redux action has actually been dispatched and will reach the reducers.</p>
<pre><code class="language-diff">// app/js/components/FavouritesList/__specs__/FavouritesList.spec.jsx

  describe('ConnectedFavouritesList component', () => {
    const mockStore = configureStore([]);
    const store = mockStore({ points: pointsMock });

    it('maps store state to the props', () => {
      const wrapper = shallow(&#x3C;ConnectedFavouritesList store={store} />);

      expect(wrapper).toMatchSnapshot();
    });
+
+    describe('when the delete button is clicked', () => {
+      it('calls the removeFavourite action', () => {
+        const wrapper = mount(&#x3C;ConnectedFavouritesList store={store} />);
+        const expectedAction = [removeFavourite('point-1')];
+
+        wrapper.find('button').simulate('click');
+
+        expect(store.getActions()).toEqual(expectedAction);
+      });
+    });
  });
</code></pre>
<p>Run the tests again and you should see everything is passing. We are nearly
done! The final step is to test the <code>Pointer</code> component.</p></div></div></div></div></div></body></html>