<!DOCTYPE html>
 <html><head><meta charset="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><link rel="preload" href="/learning-react-and-redux-documentation/component---src-layouts-index-js-616843d721f40ddfd4aa.js" as="script"/><link rel="preload" href="/learning-react-and-redux-documentation/component---src-templates-post-js-00a9cc51cc7412ed4550.js" as="script"/><link rel="preload" href="/learning-react-and-redux-documentation/path---tutorial-steps-19-testing-redux-reducers-2d1b579ea6e68bd3f5be.js" as="script"/><link rel="preload" href="/learning-react-and-redux-documentation/app-a343a914d31e22ec2123.js" as="script"/><link rel="preload" href="/learning-react-and-redux-documentation/commons-8d5048b07969403445b0.js" as="script"/><script id="webpack-manifest">
            //<![CDATA[
            window.webpackManifest = {"231608221292675":"app-a343a914d31e22ec2123.js","195351340454287":"component---src-templates-post-js-00a9cc51cc7412ed4550.js","162898551421021":"component---src-pages-404-js-4503918ea3a16cfcdb75.js","35783957827783":"component---src-pages-index-js-74e63cc5e6a75c49970b.js","60335399758886":"path----d56a5c009c65cb248351.js","118799121156847":"path---tutorial-getting-started-57ac6b958faa71aa5867.js","135563891114638":"path---tutorial-links-bcadaf9b6ea166d2276f.js","214057910109245":"path---tutorial-steps-1-setup-package-2eab81d1a9e93789262b.js","206805960689390":"path---tutorial-steps-10-pointer-details-59674946b68132e99148.js","132978315027406":"path---tutorial-steps-11-favourite-places-e292d315707cb22a6765.js","17971265750924":"path---tutorial-steps-12-favourites-list-9b805f65778de3d2e4d2.js","237949882381156":"path---tutorial-steps-13-adding-redux-5ba099af1fbec5724f81.js","1033659491245":"path---tutorial-steps-14-managing-favourites-with-redux-77e289db4b460033dc12.js","86486738803091":"path---tutorial-steps-2-webpack-7c4c62d786d0be107c59.js","280001054470434":"path---tutorial-steps-3-babel-204416a8cd2abff4576d.js","46414529011902":"path---tutorial-steps-4-eslint-and-prettier-e9f16c7f6bc33c7b8ab7.js","97838741517688":"path---tutorial-steps-5-starting-react-186913aa562f35aa1de1.js","235804080668192":"path---tutorial-steps-6-adding-the-map-dea5c1ece86d0769572a.js","172606999645938":"path---tutorial-steps-7-styling-with-postcss-34ecdb7c69252c636bd8.js","46098157417510":"path---tutorial-steps-8-webpack-dev-server-97d6f843f061a1207aca.js","165467095976884":"path---tutorial-steps-9-adding-points-to-the-map-3a60d5f5fbaff4e4362f.js","181225226889932":"path---tutorial-steps-15-removing-favourites-from-the-list-79af37420c2a27cd5607.js","118277567452233":"path---tutorial-steps-16-ids-for-points-73ad86b602e3061c61f9.js","119454655196054":"path---tutorial-steps-17-testing-with-jest-57b3ae240a1c8defe7d1.js","182874657879501":"path---tutorial-steps-18-testing-redux-actions-2fb43a4d5dfcf6a3b485.js","164006660818621":"path---tutorial-steps-19-testing-redux-reducers-2d1b579ea6e68bd3f5be.js","191994760325403":"path---tutorial-steps-20-jest-component-configuration-5a97d77e72ab403660f2.js","179161860437318":"path---tutorial-steps-21-testing-the-map-9e084319992ef5732005.js","164153876557642":"path---tutorial-steps-22-testing-connected-components-de56b137bca4f2edd2bc.js","254022195166212":"path---404-a0e39f21c11f6a62c5ab.js","142629428675168":"path---index-7b9554a87d0e5a9597bd.js","178698757827068":"path---404-html-a0e39f21c11f6a62c5ab.js","114276838955818":"component---src-layouts-index-js-616843d721f40ddfd4aa.js"}
            //]]>
            </script><title data-react-helmet="true">Learning React and Redux</title><meta data-react-helmet="true" name="description" content="A tutorial for learning React and Redux"/><meta data-react-helmet="true" name="keywords" content="react, redux, tutorial"/><script>
  !function(e,t,r){function n(){for(;d[0]&&"loaded"==d[0][f];)c=d.shift(),c[o]=!i.parentNode.insertBefore(c,i)}for(var s,a,c,d=[],i=e.scripts[0],o="onreadystatechange",f="readyState";s=r.shift();)a=e.createElement(t),"async"in i?(a.async=!1,e.head.appendChild(a)):i[f]?(d.push(a),a[o]=n):e.write("<"+t+' src="'+s+'" defer></'+t+">"),a.src=s}(document,"script",[
  "/learning-react-and-redux-documentation/commons-8d5048b07969403445b0.js","/learning-react-and-redux-documentation/app-a343a914d31e22ec2123.js","/learning-react-and-redux-documentation/path---tutorial-steps-19-testing-redux-reducers-2d1b579ea6e68bd3f5be.js","/learning-react-and-redux-documentation/component---src-templates-post-js-00a9cc51cc7412ed4550.js","/learning-react-and-redux-documentation/component---src-layouts-index-js-616843d721f40ddfd4aa.js"
])
  </script><style id="gatsby-inlined-css">html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}body{margin:0}article,aside,details,figcaption,figure,footer,header,main,menu,nav,section,summary{display:block}audio,canvas,progress,video{display:inline-block}audio:not([controls]){display:none;height:0}progress{vertical-align:baseline}[hidden],template{display:none}a{background-color:transparent;-webkit-text-decoration-skip:objects}a:active,a:hover{outline-width:0}abbr[title]{border-bottom:none;text-decoration:underline;text-decoration:underline dotted}b,strong{font-weight:inherit;font-weight:bolder}dfn{font-style:italic}h1{font-size:2em;margin:.67em 0}mark{background-color:#ff0;color:#000}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}img{border-style:none}svg:not(:root){overflow:hidden}code,kbd,pre,samp{font-family:monospace,monospace;font-size:1em}figure{margin:1em 40px}hr{box-sizing:content-box;height:0;overflow:visible}button,input,optgroup,select,textarea{font:inherit;margin:0}optgroup{font-weight:700}button,input{overflow:visible}button,select{text-transform:none}[type=reset],[type=submit],button,html [type=button]{-webkit-appearance:button}[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner,button::-moz-focus-inner{border-style:none;padding:0}[type=button]:-moz-focusring,[type=reset]:-moz-focusring,[type=submit]:-moz-focusring,button:-moz-focusring{outline:1px dotted ButtonText}fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}legend{box-sizing:border-box;color:inherit;display:table;max-width:100%;padding:0;white-space:normal}textarea{overflow:auto}[type=checkbox],[type=radio]{box-sizing:border-box;padding:0}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}[type=search]::-webkit-search-cancel-button,[type=search]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-input-placeholder{color:inherit;opacity:.54}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}html{font:112.5%/1.45em georgia,serif;box-sizing:border-box;overflow-y:scroll}*,:after,:before{box-sizing:inherit}body{color:rgba(0,0,0,.8);font-family:georgia,serif;font-weight:400;word-wrap:break-word;-webkit-font-kerning:normal;font-kerning:normal;-ms-font-feature-settings:"kern","liga","clig","calt";-webkit-font-feature-settings:"kern","liga","clig","calt";font-feature-settings:"kern","liga","clig","calt","kern"}img{max-width:100%;margin:0 0 1.45rem;padding:10px;//border:1px solid #ddd;box-shadow:0 3px 3px #000;background:#eee;border-radius:5px}h1{font-size:2.25rem}h1,h2{margin:0 0 1.45rem;padding:0;color:inherit;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Fira Sans,Droid Sans,Helvetica Neue,sans-serif;font-weight:700;text-rendering:optimizeLegibility;line-height:1.1}h2{font-size:1.62671rem}h3{font-size:1.38316rem}h3,h4{margin:0 0 1.45rem;padding:0;color:inherit;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Fira Sans,Droid Sans,Helvetica Neue,sans-serif;font-weight:700;text-rendering:optimizeLegibility;line-height:1.1}h4{font-size:1rem}h5{font-size:.85028rem}h5,h6{margin:0 0 1.45rem;padding:0;color:inherit;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Fira Sans,Droid Sans,Helvetica Neue,sans-serif;font-weight:700;text-rendering:optimizeLegibility;line-height:1.1}h6{font-size:.78405rem}hgroup{margin:0 0 1.45rem;padding:0}ol,ul{margin:0 0 1.45rem 1.45rem;padding:0;list-style-position:outside;list-style-image:none}dd,dl,figure,p{margin:0 0 1.45rem;padding:0}pre{padding:0;font-size:.85rem;line-height:1.42;background:rgba(0,0,0,.04);border-radius:3px;overflow:auto;word-wrap:normal;padding:1.45rem}pre,table{margin:0 0 1.45rem}table{padding:0;font-size:1rem;line-height:1.45rem;border-collapse:collapse;width:100%}fieldset{margin:0 0 1.45rem;padding:0}blockquote{padding-left:1rem;padding-right:1rem;margin:0;margin-bottom:1.45rem;border-left:4px solid #ddd}form,iframe,noscript{margin:0 0 1.45rem;padding:0}hr{margin:0 0 calc(1.45rem - 1px);padding:0;background:rgba(0,0,0,.2);border:none;height:1px}address{margin:0 0 1.45rem;padding:0}b,dt,strong,th{font-weight:700}li{margin-bottom:.725rem}ol li,ul li{padding-left:0}li>ol,li>ul{margin-left:1.45rem;margin-bottom:.725rem;margin-top:.725rem}blockquote :last-child,li :last-child,p :last-child{margin-bottom:0}li>p{margin-bottom:.725rem}code,kbd,samp{font-size:.85rem;line-height:1.45rem}abbr,abbr[title],acronym{border-bottom:1px dotted rgba(0,0,0,.5);cursor:help}abbr[title]{text-decoration:none}td,th,thead{text-align:left}td,th{border-bottom:1px solid rgba(0,0,0,.12);font-feature-settings:"tnum";-moz-font-feature-settings:"tnum";-ms-font-feature-settings:"tnum";-webkit-font-feature-settings:"tnum";padding:.725rem .96667rem calc(.725rem - 1px)}td:first-child,th:first-child{padding-left:0}td:last-child,th:last-child{padding-right:0}code,tt{background-color:rgba(0,0,0,.04);border-radius:3px;font-family:SFMono-Regular,Consolas,Roboto Mono,Droid Sans Mono,Liberation Mono,Menlo,Courier,monospace;padding:0;padding-top:.2em;padding-bottom:.2em;padding-left:.4rem;margin-right:.2rem}pre code{background:none;line-height:1.42}code:after,code:before,tt:after,tt:before{letter-spacing:-.2em;content:" "}pre code:after,pre code:before,pre tt:after,pre tt:before{content:""}@media only screen and (max-width:480px){html{font-size:100%}}#toc{position:absolute;top:120px;right:15px;padding:20px 10px 5px;background:#eee;border-radius:5px;margin:0 0 15px 15px;box-shadow:0 0 1px 1px rgba(0,0,0,.2)}#toc ul{margin-bottom:0;list-style-type:square}.gatsby-resp-image-wrapper{border-radius:5px;box-shadow:0 0 3px rgba(0,0,0,.5);padding-bottom:13px}.gatsby-resp-image-background-image{border-radius:5px}.gatsby-highlight{margin-bottom:20px}code[class*=language-],pre[class*=language-]{color:#000;background:none;text-shadow:0 1px #fff;font-family:Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-ms-hyphens:none;hyphens:none}code[class*=language-]::-moz-selection,code[class*=language-] ::-moz-selection,pre[class*=language-]::-moz-selection,pre[class*=language-] ::-moz-selection{text-shadow:none;background:#b3d4fc}code[class*=language-]::selection,code[class*=language-] ::selection,pre[class*=language-]::selection,pre[class*=language-] ::selection{text-shadow:none;background:#b3d4fc}@media print{code[class*=language-],pre[class*=language-]{text-shadow:none}}pre[class*=language-]{padding:1em;margin:.5em 0;overflow:auto}:not(pre)>code[class*=language-],pre[class*=language-]{background:#f5f2f0}:not(pre)>code[class*=language-]{padding:.1em;border-radius:.3em;white-space:normal}.token.cdata,.token.comment,.token.doctype,.token.prolog{color:#708090}.token.punctuation{color:#999}.namespace{opacity:.7}.token.boolean,.token.constant,.token.deleted,.token.number,.token.property,.token.symbol,.token.tag{color:#905}.token.attr-name,.token.builtin,.token.char,.token.inserted,.token.selector,.token.string{color:#690}.language-css .token.string,.style .token.string,.token.entity,.token.operator,.token.url{color:#a67f59;background:hsla(0,0%,100%,.5)}.token.atrule,.token.attr-value,.token.keyword{color:#07a}.token.function{color:#dd4a68}.token.important,.token.regex,.token.variable{color:#e90}.token.bold,.token.important{font-weight:700}.token.italic{font-style:italic}.token.entity{cursor:help}</style></head><body><div id="___gatsby"><div data-reactroot="" data-reactid="1" data-react-checksum="-491432507"><!-- react-empty: 2 --><div style="background:#222;margin-bottom:2.5rem;" data-reactid="3"><div style="margin:0 auto;max-width:960px;padding:1.45rem 1.0875rem;" data-reactid="4"><h1 style="margin:0;" data-reactid="5"><a style="color:white;text-decoration:none;font-size:0.9em;line-height:1.5em;" href="/learning-react-and-redux-documentation/" data-reactid="6">Learning React and Redux</a></h1></div></div><div style="margin:0 auto;max-width:960px;padding:0px 1.0875rem 1.45rem;padding-top:0;" data-reactid="7"><div data-reactid="8"><aside id="toc" data-reactid="9"><ul data-reactid="10"><li data-reactid="11"><a href="/learning-react-and-redux-documentation/tutorial/getting-started" data-reactid="12"><!-- react-text: 13 -->Getting Started<!-- /react-text --></a></li><li data-reactid="14"><a href="/learning-react-and-redux-documentation/tutorial/steps/1-setup-package/" data-reactid="15"><!-- react-text: 16 -->Step 1: <!-- /react-text --><!-- react-text: 17 -->Generate the package.json<!-- /react-text --></a></li><li data-reactid="18"><a href="/learning-react-and-redux-documentation/tutorial/steps/2-webpack/" data-reactid="19"><!-- react-text: 20 -->Step 2: <!-- /react-text --><!-- react-text: 21 -->Setting up Webpack<!-- /react-text --></a></li><li data-reactid="22"><a href="/learning-react-and-redux-documentation/tutorial/steps/3-babel/" data-reactid="23"><!-- react-text: 24 -->Step 3: <!-- /react-text --><!-- react-text: 25 -->Setting up Babel<!-- /react-text --></a></li><li data-reactid="26"><a href="/learning-react-and-redux-documentation/tutorial/steps/4-eslint-and-prettier/" data-reactid="27"><!-- react-text: 28 -->Step 4: <!-- /react-text --><!-- react-text: 29 -->ESLint and Prettier<!-- /react-text --></a></li><li data-reactid="30"><a href="/learning-react-and-redux-documentation/tutorial/steps/5-starting-react/" data-reactid="31"><!-- react-text: 32 -->Step 5: <!-- /react-text --><!-- react-text: 33 -->Starting with React<!-- /react-text --></a></li><li data-reactid="34"><a href="/learning-react-and-redux-documentation/tutorial/steps/6-adding-the-map/" data-reactid="35"><!-- react-text: 36 -->Step 6: <!-- /react-text --><!-- react-text: 37 -->Adding the Map<!-- /react-text --></a></li><li data-reactid="38"><a href="/learning-react-and-redux-documentation/tutorial/steps/7-styling-with-postcss/" data-reactid="39"><!-- react-text: 40 -->Step 7: <!-- /react-text --><!-- react-text: 41 -->CSS Modules and PostCSS<!-- /react-text --></a></li><li data-reactid="42"><a href="/learning-react-and-redux-documentation/tutorial/steps/8-webpack-dev-server/" data-reactid="43"><!-- react-text: 44 -->Step 8: <!-- /react-text --><!-- react-text: 45 -->Webpack Dev Server<!-- /react-text --></a></li><li data-reactid="46"><a href="/learning-react-and-redux-documentation/tutorial/steps/9-adding-points-to-the-map/" data-reactid="47"><!-- react-text: 48 -->Step 9: <!-- /react-text --><!-- react-text: 49 -->Adding Points to the Map<!-- /react-text --></a></li><li data-reactid="50"><a href="/learning-react-and-redux-documentation/tutorial/steps/10-pointer-details/" data-reactid="51"><!-- react-text: 52 -->Step 10: <!-- /react-text --><!-- react-text: 53 -->Showing the Details of each Point<!-- /react-text --></a></li><li data-reactid="54"><a href="/learning-react-and-redux-documentation/tutorial/steps/11-favourite-places/" data-reactid="55"><!-- react-text: 56 -->Step 11: <!-- /react-text --><!-- react-text: 57 -->Favourite Places<!-- /react-text --></a></li><li data-reactid="58"><a href="/learning-react-and-redux-documentation/tutorial/steps/12-favourites-list/" data-reactid="59"><!-- react-text: 60 -->Step 12: <!-- /react-text --><!-- react-text: 61 -->Favourites List<!-- /react-text --></a></li><li data-reactid="62"><a href="/learning-react-and-redux-documentation/tutorial/steps/13-adding-redux/" data-reactid="63"><!-- react-text: 64 -->Step 13: <!-- /react-text --><!-- react-text: 65 -->Starting with Redux<!-- /react-text --></a></li><li data-reactid="66"><a href="/learning-react-and-redux-documentation/tutorial/steps/14-managing-favourites-with-redux/" data-reactid="67"><!-- react-text: 68 -->Step 14: <!-- /react-text --><!-- react-text: 69 -->Managing Favourites with Redux<!-- /react-text --></a></li><li data-reactid="70"><a href="/learning-react-and-redux-documentation/tutorial/steps/15-removing-favourites-from-the-list/" data-reactid="71"><!-- react-text: 72 -->Step 15: <!-- /react-text --><!-- react-text: 73 -->Removing Favourites from the List<!-- /react-text --></a></li><li data-reactid="74"><a href="/learning-react-and-redux-documentation/tutorial/steps/16-ids-for-points/" data-reactid="75"><!-- react-text: 76 -->Step 16: <!-- /react-text --><!-- react-text: 77 -->Adding IDs to the Points Data<!-- /react-text --></a></li><li data-reactid="78"><a href="/learning-react-and-redux-documentation/tutorial/steps/17-testing-with-jest/" data-reactid="79"><!-- react-text: 80 -->Step 17: <!-- /react-text --><!-- react-text: 81 -->Testing with Jest<!-- /react-text --></a></li><li data-reactid="82"><a href="/learning-react-and-redux-documentation/tutorial/steps/18-testing-redux-actions/" data-reactid="83"><!-- react-text: 84 -->Step 18: <!-- /react-text --><!-- react-text: 85 -->Testing Redux Actions<!-- /react-text --></a></li><li data-reactid="86"><a href="/learning-react-and-redux-documentation/tutorial/steps/19-testing-redux-reducers/" data-reactid="87"><!-- react-text: 88 -->Step 19: <!-- /react-text --><!-- react-text: 89 -->Testing Redux Reducers<!-- /react-text --></a></li><li data-reactid="90"><a href="/learning-react-and-redux-documentation/tutorial/steps/20-jest-component-configuration/" data-reactid="91"><!-- react-text: 92 -->Step 20: <!-- /react-text --><!-- react-text: 93 -->Preparing Component testing with Jest<!-- /react-text --></a></li><li data-reactid="94"><a href="/learning-react-and-redux-documentation/tutorial/steps/21-testing-the-map/" data-reactid="95"><!-- react-text: 96 -->Step 21: <!-- /react-text --><!-- react-text: 97 -->Testing the Map<!-- /react-text --></a></li><li data-reactid="98"><a href="/learning-react-and-redux-documentation/tutorial/links" data-reactid="99"><!-- react-text: 100 -->Links<!-- /react-text --></a></li></ul></aside><h1 data-reactid="101">Testing Redux Reducers</h1><h3 data-reactid="102"><!-- react-text: 103 -->Step <!-- /react-text --><!-- react-text: 104 -->19<!-- /react-text --></h3><div data-reactid="105"><p>We will be using a similar approach as the previous step to test our reducer. We
will first create a <code>__specs__</code> directory inside of the <code>app/js/reducers</code>
directory.</p>
<div class="gatsby-highlight">
      <pre class="language-bash"><code><span class="token function">mkdir</span> app/js/reducers/__specs__
</code></pre>
      </div>
<p>We then create a file named <code>points.spec.js</code> inside of this that matches the
name of our reducer file that we will be testing.</p>
<p>In this file we will need to import the reducer we want to test along with the
actions that the reducer reacts to. We will also define the <code>describe</code> block for
our reducer.</p>
<div class="gatsby-highlight">
      <pre class="language-js"><code><span class="token comment">// app/js/reducers/__specs__/points.spec.js</span>

<span class="token keyword">import</span> reducer <span class="token keyword">from</span> <span class="token string">'../points'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> addFavourite<span class="token punctuation">,</span> removeFavourite <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'../../actions'</span><span class="token punctuation">;</span>

<span class="token function">describe</span><span class="token punctuation">(</span><span class="token string">'Points Reducer'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
      </div>
<p>Next we will define mock (fake) data that our test will use as the <code>state</code>
argument. This will be a very simple version of the <code>points</code> array.</p>
<div class="gatsby-highlight">
      <pre class="language-diff"><code>// app/js/reducers/__specs__/points.spec.js

  describe('Points Reducer', () => {
<span class="token inserted">+   let initialPoints = [</span>
<span class="token inserted">+     {</span>
<span class="token inserted">+       id: 'point-1',</span>
<span class="token inserted">+       favourite: false</span>
<span class="token inserted">+     },</span>
<span class="token inserted">+     {</span>
<span class="token inserted">+       id: 'point-2',</span>
<span class="token inserted">+       favourite: true</span>
<span class="token inserted">+     }</span>
<span class="token inserted">+   ];</span>
  });
</code></pre>
      </div>
<p>We then define our first test which tests the <code>default</code> case of the reducer. We
pass the <code>initialPoints</code> mock to the reducer as the <code>state</code> argument and and
empty object as the second <code>action</code> object. Since there is no action type the
reducers falls through to the <code>default</code> case of the <code>switch</code> statement and
simply returns the state. This means we can simple expected the given
<code>initialPoints</code> to be returned and nothing to have changed.</p>
<p>At this point you can start the Jest watcher in the terminal by running</p>
<div class="gatsby-highlight">
      <pre class="language-bash"><code>yarn test:watch
</code></pre>
      </div>
<div class="gatsby-highlight">
      <pre class="language-diff"><code>// app/js/reducers/__specs__/points.spec.js

  describe('Points Reducer', () => {
    let initialPoints = [
      {
        id: 'point-1',
        favourite: false
      },
      {
        id: 'point-2',
        favourite: true
      }
    ];
<span class="token inserted">+</span>
<span class="token inserted">+   it('returns the initial state', () => {</span>
<span class="token inserted">+     expect(reducer(initialPoints, {})).toEqual(initialPoints);</span>
<span class="token inserted">+   });</span>
  });
</code></pre>
      </div>
<p>We will now go ahead an define a new context for testing the Redux actions
passed to the reducer. In this section we will start with a test that marks
"point-1" as a favourite and our expectation will be that the <code>favourite: false</code>
turns to <code>favourite: true</code> inside of the initialPoints mock.</p>
<div class="gatsby-highlight">
      <pre class="language-diff"><code>// app/js/reducers/__specs__/points.spec.js

  describe('Points Reducer', () => {
    let initialPoints = [
      {
        id: 'point-1',
        favourite: false
      },
      {
        id: 'point-2',
        favourite: true
      }
    ];

    it('returns the initial state', () => {
      expect(reducer(initialPoints, {})).toEqual(initialPoints);
    });

<span class="token inserted">+   describe('favourites handling', () => {</span>
<span class="token inserted">+     it('can update a point to be a favourite', () => {</span>
<span class="token inserted">+       const action = addFavourite('point-1');</span>
<span class="token inserted">+       const result = reducer(initialPoints, action);</span>
<span class="token inserted">+       const expected = [</span>
<span class="token inserted">+         {</span>
<span class="token inserted">+           id: 'point-1',</span>
<span class="token inserted">+           favourite: true</span>
<span class="token inserted">+         },</span>
<span class="token inserted">+         {</span>
<span class="token inserted">+           id: 'point-2',</span>
<span class="token inserted">+           favourite: true</span>
<span class="token inserted">+         }</span>
<span class="token inserted">+       ];</span>
<span class="token inserted">+</span>
<span class="token inserted">+       expect(result).toEqual(expected);</span>
<span class="token inserted">+     });</span>
<span class="token inserted">+   });</span>
  });
</code></pre>
      </div>
<p>We can now write our final test for the "remove" action of the reducer. It is
similar to the "add" action except we will give the ID "point-2" to the action
and expect both <code>favourite</code> properties inside of <code>initialPoints</code> to be <code>false</code>.</p>
<div class="gatsby-highlight">
      <pre class="language-diff"><code>// app/js/reducers/__specs__/points.spec.js

  describe('favourites handling', () => {
    it('can update a point to be a favourite', () => {
      const action = addFavourite('point-1');
      const result = reducer(initialPoints, action);

      let expected = [
        {
          id: 'point-1',
          favourite: true
        },
        {
          id: 'point-2',
          favourite: true
        }
      ];

      expect(result).toEqual(expected);
    });
<span class="token inserted">+</span>
<span class="token inserted">+   it('can remove a point from being a favourite', () => {</span>
<span class="token inserted">+     const action = removeFavourite('point-2');</span>
<span class="token inserted">+     const result = reducer(initialPoints, action);</span>
<span class="token inserted">+     const expected = [</span>
<span class="token inserted">+       {</span>
<span class="token inserted">+         id: 'point-1',</span>
<span class="token inserted">+         favourite: false</span>
<span class="token inserted">+       },</span>
<span class="token inserted">+       {</span>
<span class="token inserted">+         id: 'point-2',</span>
<span class="token inserted">+         favourite: false</span>
<span class="token inserted">+       }</span>
<span class="token inserted">+     ];</span>
<span class="token inserted">+</span>
<span class="token inserted">+     expect(result).toEqual(expected);</span>
<span class="token inserted">+   });</span>
  });
</code></pre>
      </div>
<p>Although this test is written correctly if you look at the terminal you will see
the test is failing.</p>
<div class="gatsby-highlight">
      <pre class="language-bash"><code>  ● Points Reducer › favourites handling › can remove a point from being a favourite

    expect<span class="token punctuation">(</span>received<span class="token punctuation">)</span>.toEqual<span class="token punctuation">(</span>expected<span class="token punctuation">)</span>

    Expected value to equal:
      <span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token string">"favourite"</span><span class="token keyword">:</span> false, <span class="token string">"id"</span><span class="token keyword">:</span> <span class="token string">"point-1"</span><span class="token punctuation">}</span>, <span class="token punctuation">{</span><span class="token string">"favourite"</span><span class="token keyword">:</span> false, <span class="token string">"id"</span><span class="token keyword">:</span> <span class="token string">"point-2"</span><span class="token punctuation">}</span><span class="token punctuation">]</span>
    Received:
      <span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token string">"favourite"</span><span class="token keyword">:</span> true, <span class="token string">"id"</span><span class="token keyword">:</span> <span class="token string">"point-1"</span><span class="token punctuation">}</span>, <span class="token punctuation">{</span><span class="token string">"favourite"</span><span class="token keyword">:</span> false, <span class="token string">"id"</span><span class="token keyword">:</span> <span class="token string">"point-2"</span><span class="token punctuation">}</span><span class="token punctuation">]</span>

    Difference:

    - Expected
    + Received

    @@ -1,8 +1,8 @@
      Array <span class="token punctuation">[</span>
        Object <span class="token punctuation">{</span>
    -     <span class="token string">"favourite"</span><span class="token keyword">:</span> false,
    +     <span class="token string">"favourite"</span><span class="token keyword">:</span> true,
          <span class="token string">"id"</span><span class="token keyword">:</span> <span class="token string">"point-1"</span>,
</code></pre>
      </div>
<p>Although "point-2" has updated the <code>favourite</code> state to be <code>false</code>, "point-1" is
<code>true</code> even though we specified it should be <code>false</code> by default in the
<code>initialPoints</code> array at the top of the test.</p>
<p>This is because the tests are run in order and as the previous "can update a
point to be a favourite" test run it mutated the <code>initialPoints</code> mock.</p>
<p>We can fix this by adding a <code>beforeEach</code> function to our code that runs before
each individual test and allows us to set up the test scenario. In this case we
will always reset the <code>initialPoints</code> variable to be the initial mock that we
defined, so that any changes that happen throughout the test do not affect
subsequent tests.</p>
<div class="gatsby-highlight">
      <pre class="language-diff"><code>// app/js/reducers/__specs__/points.spec.js


describe('Points Reducer', () => {
<span class="token deleted">- let initialPoints = [</span>
<span class="token deleted">-   {</span>
<span class="token deleted">-     id: 'point-1',</span>
<span class="token deleted">-     favourite: false</span>
<span class="token deleted">-   },</span>
<span class="token deleted">-   {</span>
<span class="token deleted">-     id: 'point-2',</span>
<span class="token deleted">-     favourite: true</span>
<span class="token deleted">-   }</span>
<span class="token deleted">- ];</span>

<span class="token inserted">+ let initialPoints;</span>
<span class="token inserted">+</span>
<span class="token inserted">+ beforeEach(() => {</span>
<span class="token inserted">+   initialPoints = [</span>
<span class="token inserted">+     {</span>
<span class="token inserted">+       id: 'point-1',</span>
<span class="token inserted">+       favourite: false</span>
<span class="token inserted">+     },</span>
<span class="token inserted">+     {</span>
<span class="token inserted">+       id: 'point-2',</span>
<span class="token inserted">+       favourite: true</span>
<span class="token inserted">+     }</span>
<span class="token inserted">+   ];</span>
<span class="token inserted">+ });</span>

  ...
});
</code></pre>
      </div>
<p>The <code>let</code> is defined outside of the <code>beforeEach</code> or the variable would only be
available inside of the scope of the <code>beforeEach</code> function, instead of being
available to everything defined inside the <code>describe</code>.</p>
<p>Take a look at the terminal again and you will notice the Jest watcher has
re-run the test suite and now all tests are passing.</p>
<h2>Some Refactoring</h2>
<p>Now that everything is working we can make a small refactoring to our spec. You
may notice that we repeat the mock data 3 times throughout the spec. In this
case it may be acceptable but if you image a spec with 10's or 100's of tests,
this could get out of hand, especially if you want to change the data structure
one day, you will have to refactor the code in many locations.</p>
<p>Now we will define a helper function inside of the spec that will build the mock
data structure for us. We will call it <code>buildPointsMock</code>. This functions accepts
2 arguments. The first is the boolean <code>true</code> or <code>false</code> state of the <code>favourite</code>
property for "point-1". The second argument is the same for "point-2".</p>
<div class="gatsby-highlight">
      <pre class="language-diff"><code>// app/js/reducers/__specs__/points.spec.js

  import reducer from '../points';
  import { addFavourite, removeFavourite } from '../../actions';

<span class="token inserted">+ const buildPointsMock = (firstFavouriteState, secondFavouriteState) => [</span>
<span class="token inserted">+   { id: 'point-1', favourite: firstFavouriteState },</span>
<span class="token inserted">+   { id: 'point-2', favourite: secondFavouriteState }</span>
<span class="token inserted">+ ];</span>

  ...
</code></pre>
      </div>
<p>We can then call this function to build our data structure instead of having
literal mock objects and expectations.</p>
<div class="gatsby-highlight">
      <pre class="language-diff"><code>// app/js/reducers/__specs__/points.spec.js

  describe('Points Reducer', () => {
    let initialPoints;

    beforeEach(() => {
<span class="token deleted">-     initialPoints = [</span>
<span class="token deleted">-       {</span>
<span class="token deleted">-         id: 'point-1',</span>
<span class="token deleted">-         favourite: false</span>
<span class="token deleted">-       },</span>
<span class="token deleted">-       {</span>
<span class="token deleted">-         id: 'point-2',</span>
<span class="token deleted">-         favourite: true</span>
<span class="token deleted">-       }</span>
<span class="token deleted">-     ];</span>
<span class="token inserted">+     initialPoints = buildPointsMock(false, true);</span>
    });

    it('returns the initial state', () => {
      expect(reducer(initialPoints, {})).toEqual(initialPoints);
    });

    describe('favourites handling', () => {
      it('can update a point to be a favourite', () => {
        const action = addFavourite('point-1');
        const result = reducer(initialPoints, action);
<span class="token deleted">-       const expected = [</span>
<span class="token deleted">-         {</span>
<span class="token deleted">-           id: 'point-1',</span>
<span class="token deleted">-           favourite: true</span>
<span class="token deleted">-         },</span>
<span class="token deleted">-         {</span>
<span class="token deleted">-           id: 'point-2',</span>
<span class="token deleted">-           favourite: true</span>
<span class="token deleted">-         }</span>
<span class="token deleted">-       ];</span>
<span class="token inserted">+       const expected = buildPointsMock(true, true);</span>

        expect(result).toEqual(expected);
      });

      it('can remove a point from being a favourite', () => {
        const action = removeFavourite('point-2');
        const result = reducer(initialPoints, action);
<span class="token deleted">-       const expected = [</span>
<span class="token deleted">-         {</span>
<span class="token deleted">-           id: 'point-1',</span>
<span class="token deleted">-           favourite: false</span>
<span class="token deleted">-         },</span>
<span class="token deleted">-         {</span>
<span class="token deleted">-           id: 'point-2',</span>
<span class="token deleted">-           favourite: false</span>
<span class="token deleted">-         }</span>
<span class="token deleted">-       ];</span>
<span class="token inserted">+       const expected = buildPointsMock(false, false);</span>

        expect(result).toEqual(expected);
      });
    });
  });
</code></pre>
      </div>
<p>This small refactoring has removed many lines from the file length and also
means that if we update our mock data structure we only have to do the update in
one place.</p>
<p>Check once more in the terminal that the watcher has run again and you will see
that the tests are still passing.</p>
<p>We can also run the Jest coverage task now to see what impact our action and
reducer tests have had. Stop the watcher with <code>cmd + c</code> or <code>ctrl + c</code> and run.</p>
<div class="gatsby-highlight">
      <pre class="language-bash"><code>yarn test:coverage
</code></pre>
      </div>
<p>An output similar to this will be shown:</p>
<div class="gatsby-highlight">
      <pre class="language-bash"><code>$ jest --coverage
 PASS  app/js/reducers/__specs__/points.spec.js
 PASS  app/js/actions/__specs__/points.spec.js

Test Suites: 2 passed, 2 total
Tests:       5 passed, 5 total
Snapshots:   0 total
Time:        1.769s
Ran all <span class="token function">test</span> suites.
---------------<span class="token operator">|</span>----------<span class="token operator">|</span>----------<span class="token operator">|</span>----------<span class="token operator">|</span>----------<span class="token operator">|</span>----------------<span class="token operator">|</span>
File           <span class="token operator">|</span>  % Stmts <span class="token operator">|</span> % Branch <span class="token operator">|</span>  % Funcs <span class="token operator">|</span>  % Lines <span class="token operator">|</span>Uncovered Lines <span class="token operator">|</span>
---------------<span class="token operator">|</span>----------<span class="token operator">|</span>----------<span class="token operator">|</span>----------<span class="token operator">|</span>----------<span class="token operator">|</span>----------------<span class="token operator">|</span>
All files      <span class="token operator">|</span>      100 <span class="token operator">|</span>       75 <span class="token operator">|</span>      100 <span class="token operator">|</span>      100 <span class="token operator">|</span>                <span class="token operator">|</span>
 js            <span class="token operator">|</span>      100 <span class="token operator">|</span>      100 <span class="token operator">|</span>      100 <span class="token operator">|</span>      100 <span class="token operator">|</span>                <span class="token operator">|</span>
  constants.js <span class="token operator">|</span>      100 <span class="token operator">|</span>      100 <span class="token operator">|</span>      100 <span class="token operator">|</span>      100 <span class="token operator">|</span>                <span class="token operator">|</span>
 js/actions    <span class="token operator">|</span>      100 <span class="token operator">|</span>      100 <span class="token operator">|</span>      100 <span class="token operator">|</span>      100 <span class="token operator">|</span>                <span class="token operator">|</span>
  index.js     <span class="token operator">|</span>      100 <span class="token operator">|</span>      100 <span class="token operator">|</span>      100 <span class="token operator">|</span>      100 <span class="token operator">|</span>                <span class="token operator">|</span>
  points.js    <span class="token operator">|</span>      100 <span class="token operator">|</span>      100 <span class="token operator">|</span>      100 <span class="token operator">|</span>      100 <span class="token operator">|</span>                <span class="token operator">|</span>
 js/reducers   <span class="token operator">|</span>      100 <span class="token operator">|</span>       75 <span class="token operator">|</span>      100 <span class="token operator">|</span>      100 <span class="token operator">|</span>                <span class="token operator">|</span>
  points.js    <span class="token operator">|</span>      100 <span class="token operator">|</span>       75 <span class="token operator">|</span>      100 <span class="token operator">|</span>      100 <span class="token operator">|</span>             87 <span class="token operator">|</span>
---------------<span class="token operator">|</span>----------<span class="token operator">|</span>----------<span class="token operator">|</span>----------<span class="token operator">|</span>----------<span class="token operator">|</span>----------------<span class="token operator">|</span>
✨  Done <span class="token keyword">in</span> 2.60s.
</code></pre>
      </div>
<p>You can see that we have very high code coverage across our actions and
reducers. This means that if we change them it is highly likely that a test will
fail and we know something has changed. It is them important to make sure the
tests stay up to date as your application grows.</p>
<p>You may notice that only the actions, constants, and reducer files are mentioned
here. This is because there are no tests regarding the components so Jest does
not even know they exist yet.</p>
<p>The final step to our testing will be to test our components. We will start
working on this in our next step.</p></div></div></div></div></div></body></html>